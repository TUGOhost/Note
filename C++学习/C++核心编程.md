# C++核心编程

主要针对C++面向对象编程技术做详细讲解，探讨C++中的核心和精髓。

## 1.内存分区模型

C++程序在执行时，将内存大方向划分为4个区域

- 代码区：存放函数体的二进制代码，由操作系统进行管理
- 全局区：存放全局变量和静态变量以及常量
- 栈区：由编译器自动分配释放，存放函数的参数值，局部变量等
- 堆区：由程序员分配和释放，若程序员不释放，程序结束时由操作系统回收



内存四区意义：

不同区域存放的数据，赋予不同的生命周期，给我们更大的灵活编程



### 1.1 程序运行前

在程序编译后，生成了exe可执行程序，未执行该程序前分为两个区域

**代码区**：

- 存放CPU执行的机器指令
- 代码区是共享的，共享的目的是对于频繁被执行的程序，只需要在内存中有一份代码即可
- 代码区是只读的，使其只读的原因是防止程序意外地修改了它的指令

**全局区**：

- 全局变量和静态变量存放在此
- 全局区还包含了常量区，字符串常量和其他常量（const修饰的全局变量）也存放在此
- 该区域的数据在程序结束后由操作系统释放

### 1.2 程序运行后

**栈区**：

- 由编译自动分配释放，存放函数的参数值、局部变量等

注意事项：不要返回局部变量的地址，因为栈区开辟的数据由编译器自动释放

**堆区**

- 由程序员分配释放，若程序员不释放，程序结束时由操作系统回收

在C++中主要利用new在堆区开辟内存

### 1.3 new操作符

C++中利用new操作符在堆区开辟数据

堆区开辟的数据，由程序员手动开辟，手动释放，释放利用操作符delete

语法：`new 数据类型`

利用new创建的数据，会返回该数据对应的类型的指针

## 引用

### 2.1引用的基本使用

作用：给变量起别名

语法：`数据类型 &别名= 原名`

### 2.2 引用注意事项

- 引用必须初始化
- 引用在初始化后，不可以改变

### 2.3 引用做函数参数

作用：函数传参时，可以利用引用的技术让形参修饰实参

优点：可以简化指针修改实参

总结：通过引用参数产生的效果同按地址传递是一样的。引用的语法更清楚简单

### 2.4 引用做函数的返回值

作用：引用可以作为函数的返回值存在的

注意：不要返回局部变量音乐

用法：函数调用作为左值

### 2.5引用的本质

本质：引用的本质在C++内部实现一个指针常量

### 2.6 常量引用

作用：常量引用主要用来修饰形参，防止误操作

在函数形参列表中，可以加const修饰形参，防止形参改变实参

## 3 函数提高

### 3.1 函数默认参数

在C++中，函数的形参列表中的形参是可以有默认值的。

语法：`返回值类型 函数名(参数 = 默认值){}`

注意事项：

1. 如果某个位置已经有了默认参数，那么从这个位置往后，从左到右都必须有默认值
2. 如果函数的声明有默认参数，函数实现就不能有默认参数。声明和实现只能有一个有默认参数

### 3.2 函数占位参数

C++中函数的形参列表里可以占位参数，用来做占位，调用函数时必须填补该位置

语法：`返回值类型 函数名(数据类型){}`

